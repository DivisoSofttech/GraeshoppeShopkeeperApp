<ion-header>
  <ion-toolbar>
    <ion-buttons>
      <div *ngIf="value==''">
        <ion-button (click)="dismiss()">
          <ion-icon name="close"></ion-icon>
        </ion-button>
      </div>
      <div *ngIf="value=='category'||value=='uom'">
        <ion-button (click)="slide('none')">
          <ion-icon name="arrow-round-back"></ion-icon>
        </ion-button>
      </div>
      <div *ngIf="mode=='update'">
        <ion-title>Update Product</ion-title>
      </div>
      <div *ngIf="mode=='create'">
        <ion-title>Create Product</ion-title>
      </div>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-slides #slides class="swiper-no-swiping">
    <ion-slide>
      <div>
        <div margin>
          <ion-card>
            <ion-card-content>
                <ion-item text-center *ngIf="productDTO.image == undefined">
                    <ion-label>
                  <ion-img (click)="selectImage()" src="assets/images/camera.png"></ion-img>
                </ion-label>
                </ion-item>
                <ion-item text-center *ngIf="productDTO.image != undefined">
                    <ion-label>
                  <img (click)="selectImage()" [src]="'data:' + productDTO.imageContentType + ';base64,' + productDTO.image"/>
                </ion-label>
                </ion-item>
              <ion-item>
                <ion-label position="floating">Name</ion-label>
                <ion-input type="text" [(ngModel)]="productDTO.name"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Description</ion-label>
                <ion-input type="text" [(ngModel)]="productDTO.reference"></ion-input>
              </ion-item>
              <!-- <ion-item>
            <ion-label position="end">Barcode</ion-label>
            <ion-button  fill="none">
                <ion-icon name="barcode" slot="icon-only"></ion-icon>
              </ion-button>
            </ion-item> -->
              <ion-item>
                <span slot="start">
                    <ion-label>Category</ion-label>
                </span>
                <span slot="start">
                 
                  <ion-select [(ngModel)]="productDTO.categoryId">
                    <ion-select-option *ngFor="let category of categories" value="{{category.id}}" required>
                      {{category.name}}
                    </ion-select-option>
                  </ion-select>
                </span>
                <span slot="end">
                  <ion-icon name="add" (click)="slide('category')"></ion-icon>
                </span>
              </ion-item>
              <!-- <ion-item>
                <ion-text slot="start" >Tax Category</ion-text>
                <ion-select slot="start">
                  <ion-select-option></ion-select-option>
                </ion-select>
                <ion-icon slot="end" name="add"></ion-icon>
            </ion-item> -->
              <ion-item>
                  <span slot="start">
                      <ion-label>Unit</ion-label>
                  </span>
                <span slot="start">
                  <ion-select [(ngModel)]="productDTO.unitId">
                    <ion-select-option *ngFor="let uom of uom" value="{{uom.id}}" required>{{uom.unit}}
                    </ion-select-option>
                  </ion-select>
                </span>
                <span slot="end">
                  <ion-icon name="add" (click)="slide('uom')"></ion-icon>
                </span>
              </ion-item>
            </ion-card-content>
          </ion-card>
          <ion-card>
            <ion-item>
              <ion-label position="floating">Sell Price</ion-label>
              <ion-input type="number" [(ngModel)]="productDTO.sellingPrice"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Buy Price</ion-label>
              <ion-input type="number" [(ngModel)]="productDTO.buyPrice"></ion-input>
            </ion-item>
          </ion-card>
          <ion-card>
            <ion-item>
              <span slot="start">
              <ion-label slot="start">Auxilary Item</ion-label>
              </span>
              <span slot="end">
              <ion-checkbox slot="end" [(ngModel)]="productDTO.isAuxilaryItem"></ion-checkbox>
            </span>
              
            </ion-item>
            <ion-item *ngIf="productDTO.isAuxilaryItem==false">
                <span slot="start">
                    <ion-label>Add Auxilary Items</ion-label>
                    </span>
                <span slot="end" >
                    <ion-select multiple [(ngModel)]="auxilaryItem.productId">
                        <!-- <ion-select-option *ngFor="let auxilary of auxilaryItems"  value="{{auxilary.id}}" required>
                          {{auxilary.name}}
                        </ion-select-option> -->
                      </ion-select>
                </span>
                <span slot="end">
                    <ion-icon name="add" ></ion-icon>
                </span>
            </ion-item>
            <ion-item *ngIf="productDTO.isAuxilaryItem==false">
                <span slot="start">
                    <ion-label>Add Combo Items</ion-label>
                    </span>
                <span slot="end" >
                    <ion-select>
                        <ion-select-option >
                        </ion-select-option>
                      </ion-select>
                </span>
                <span slot="end">
                    <ion-icon name="add" ></ion-icon>
                </span>
              </ion-item>
            <ion-item>
              <ion-label slot="start">Service Item</ion-label>
              <ion-checkbox slot="end" [(ngModel)]="productDTO.isServiceItem"></ion-checkbox>
            </ion-item>
            <ion-card>
              <ion-item>
                <ion-label slot="start">Active</ion-label>
                <ion-toggle slot="start" [(ngModel)]="productDTO.isActive"></ion-toggle>
                <ion-text slot="start">Show in App</ion-text>
                <ion-toggle slot="end" [(ngModel)]="productDTO.showInCatalogue"></ion-toggle>
              </ion-item>
            </ion-card>
          </ion-card>
        </div>
      </div>
    </ion-slide>
    <ion-slide>
      <app-create-edit-category [throughProduct]='true'></app-create-edit-category>
    </ion-slide>
    <ion-slide>
      <app-create-edit-uom [throughProduct]='true'></app-create-edit-uom>
    </ion-slide>
  </ion-slides>
</ion-content>
<ion-footer>
  <div *ngIf="mode=='update'">
    <ion-button margin expand="block" color="primary">Update</ion-button>
  </div>
  <div *ngIf="mode=='create'">
    <ion-button margin expand="block" color="primary" (click)="createProduct()">Create</ion-button>
  </div>
</ion-footer>