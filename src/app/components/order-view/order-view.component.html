<ion-header>
  <ion-toolbar>
    <ion-buttons>
      <ion-button (click)="dismiss()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
      <ion-title>Delivery Info</ion-title>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card class="ion-no-padding">
    <ion-card-header class="ion-no-padding">
      <ion-item lines="none">
        <ion-text slot="start" >
            Subtotal
        </ion-text>
        <ion-text slot="start" slot="end" class="ion-text-right">
            &#8364;{{ order.subTotal |  number: "1.1-2"}}
        </ion-text>
      </ion-item>
      <ion-item lines="none" *ngIf=" order.deliveryInfo !== null && order.deliveryInfo.deliveryType ==='delivery'">
          <ion-text slot="start" >
              Delivery
          </ion-text>
          <ion-text slot="start" slot="end" class="ion-text-right">
              &#8364;{{order.deliveryInfo.deliveryCharge |  number: "1.1-2"}}
          </ion-text>
        </ion-item>  
        <ion-item lines="none" *ngIf="order.deliveryInfo !== null && order.deliveryInfo.deliveryType ==='collection'">
            <ion-text slot="start" >
                Collection
            </ion-text>
            <ion-text slot="start" slot="end" class="ion-text-right">
                &#8364; 0
            </ion-text>
        </ion-item>

    </ion-card-header>
    <ion-card-content class="ion-no-padding">
        <ion-item lines="none">
            <ion-text slot="start" >
                <b>Total</b>
            </ion-text>
            <ion-text slot="start" slot="end" class="ion-text-right">
              <b>&#8364;{{order.grandTotal |  number: "1.1-2"}}</b>
            </ion-text>
          </ion-item>    
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-item lines="none">
      <ion-text slot="start" >
          Payment mode
      </ion-text>
      <ion-text slot="start" slot="end" class="ion-text-right">{{ order.paymentMode}}</ion-text>
    </ion-item>

    <ion-item lines="none">
      <ion-text slot="start" >
          Delivery type
      </ion-text>
      <ion-text slot="start" slot="end" class="ion-text-right">{{ order.deliveryInfo.deliveryType}}</ion-text>
    </ion-item>
  </ion-card>



  <ion-card  *ngIf="order.deliveryInfo !== null && order.deliveryInfo.deliveryAddress !== null">
      <ion-card-header color="primary">
        <ion-card-title>
          <h1>Address</h1>
        </ion-card-title>
      </ion-card-header>
      <ion-card-content class="ion-no-padding pd-10">
        <ion-item lines="none" *ngIf="order.deliveryInfo !== null">
          <ion-label>
            <address>
              <span *ngIf="order.deliveryInfo.deliveryAddress.addressType">
                ({{ order.deliveryInfo.deliveryAddress.addressType | titlecase}}),
              </span>
              <span>{{ order.deliveryInfo.deliveryAddress.name | titlecase }},</span>
              <span>
                {{ order.deliveryInfo.deliveryAddress.houseNoOrBuildingName }},
              </span>
            </address>

            <address>
              <span>{{ order.deliveryInfo.deliveryAddress.city }},</span>
              <span>{{ order.deliveryInfo.deliveryAddress.landmark }},</span>
              <span *ngIf="order.deliveryInfo.deliveryAddress.pincode">
                {{ order.deliveryInfo.deliveryAddress.pincode}},
              </span>
            </address>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <ion-card *ngIf="order.deliveryInfo !== null && order.deliveryInfo.deliveryNotes !== null">
        <ion-card-header color="primary">
          <ion-card-title>
            <h1>Note</h1>
          </ion-card-title>
        </ion-card-header>
        <ion-card-content class="ion-no-padding pd-10">
          <ion-item lines="none">
              <p><b>{{order.deliveryInfo.deliveryNotes | titlecase}}</b></p>
          </ion-item>
        </ion-card-content>
      </ion-card>

      <ion-card *ngIf="order.allergyNote !== null">
        <ion-card-header color="primary">
          <ion-card-title>
            <h1>Allergy Note</h1>
          </ion-card-title>
        </ion-card-header>
        <ion-card-content class="ion-no-padding pd-10">
          <ion-item lines="none">
              <p><b>{{order.allergyNote}}</b></p>
          </ion-item>
        </ion-card-content>
      </ion-card>

      <ion-card >
        <ion-card-header color="primary">
          <ion-card-title>
            <h1>Products</h1>
          </ion-card-title>
        </ion-card-header>
        <ion-card-content class="ion-no-padding pd-10">
            <app-order-product-card *ngFor="let orderLine of order.orderLines" [orderLine]="orderLine" ></app-order-product-card>
        </ion-card-content>
      </ion-card>

</ion-content>